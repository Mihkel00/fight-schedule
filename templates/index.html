<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fight Schedule - Upcoming UFC & Boxing Fights</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Staatliches&family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'staatliches': ['"Staatliches"', 'Impact', 'sans-serif'],
                        'work': ['"Work Sans"', 'sans-serif'],
                    },
                    colors: {
                        'dark-bg': '#0f0f0f',
                        'dark-card': '#121212',
                        'dark-elevated': '#242424',
                        'dark-border': '#2a2a2a',
                        'text-primary': '#ffffff',
                        'text-secondary': '#a3a3a3',
                        'text-tertiary': '#6b6b6b',
                        'accent-red': '#dc2626',
                        'accent-orange': '#f59e0b',
                    }
                }
            }
        }
    </script>
    <style>
        .scroll-container {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            gap: 1rem;
            scrollbar-width: none;
            -ms-overflow-style: none;
            scroll-behavior: smooth;
        }
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        .scroll-item {
            scroll-snap-align: start;
            flex: 0 0 auto;
        }
        @media (max-width: 640px) {
            .scroll-container {
                gap: 0.75rem;
                padding-right: 1rem;
            }
            .scroll-item {
                width: calc(100vw - 6rem);
                max-width: 280px;
            }
        }
        .scroll-wrapper {
            position: relative;
        }
        .scroll-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(18, 18, 18, 0.9);
            border: 1px solid #2a2a2a;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .scroll-btn:hover {
            background: rgba(36, 36, 36, 0.95);
            border-color: #dc2626;
        }
        .scroll-btn-left {
            left: -20px;
        }
        .scroll-btn-right {
            right: -20px;
        }
        @media (max-width: 1024px) {
            .scroll-btn {
                display: none;
            }
        }
    </style>
    <script>
        function scrollContainer(direction, containerId) {
            const container = document.getElementById(containerId);
            const scrollAmount = 320;
            container.scrollBy({
                left: direction === 'left' ? -scrollAmount : scrollAmount,
                behavior: 'smooth'
            });
        }

        // Search functionality
        let allFights = [];
        
        document.addEventListener('DOMContentLoaded', function() {
            // Collect all fights from sections
            const featured = {{ featured_fights|tojson|safe }};
            const ufc = {{ ufc_fights|tojson|safe }};
            const boxing = {{ boxing_fights|tojson|safe }};
            const upcoming = {{ coming_soon|tojson|safe }};
            
            allFights = [...featured, ...ufc, ...boxing, ...upcoming];
            
            const searchInput = document.getElementById('searchInput');
            const sections = document.querySelectorAll('.mb-12');
            
            searchInput.addEventListener('input', function(e) {
                const query = e.target.value.toLowerCase().trim();
                
                if (query.length === 0) {
                    // Show all sections, hide results
                    sections.forEach(s => s.style.display = 'block');
                    document.getElementById('searchResults')?.remove();
                    return;
                }
                
                // Hide all sections
                sections.forEach(s => s.style.display = 'none');
                
                // Filter fights
                const results = allFights.filter(fight => 
                    fight.fighter1.toLowerCase().includes(query) ||
                    fight.fighter2.toLowerCase().includes(query) ||
                    (fight.event_name && fight.event_name.toLowerCase().includes(query)) ||
                    fight.venue.toLowerCase().includes(query)
                );
                
                displaySearchResults(results, query);
            });
        });
        
        function displaySearchResults(results, query) {
            // Remove existing results
            document.getElementById('searchResults')?.remove();
            
            const container = document.querySelector('.max-w-7xl');
            const resultsDiv = document.createElement('div');
            resultsDiv.id = 'searchResults';
            resultsDiv.className = 'mb-12';
            
            if (results.length === 0) {
                resultsDiv.innerHTML = `
                    <h2 class="font-staatliches text-3xl uppercase mb-6">Search Results</h2>
                    <div class="bg-dark-card rounded-xl p-8 border border-dark-border text-center">
                        <p class="font-work text-text-secondary">No fights found for "${query}"</p>
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = `
                    <h2 class="font-staatliches text-3xl uppercase mb-6">Search Results <span class="text-text-secondary">${results.length}</span></h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${results.map(fight => createFightCard(fight)).join('')}
                    </div>
                `;
            }
            
            // Insert after header (first child is header div)
            const header = container.children[0];
            container.insertBefore(resultsDiv, header.nextSibling);
        }
        
        function createFightCard(fight) {
            const isUFC = fight.sport === 'UFC';
            const accentColor = isUFC ? 'accent-red' : 'accent-orange';
            const placeholder = isUFC ? '/static/placeholder-fighter-mma.png' : '/static/placeholder-fighter-boxing.png';
            const eventUrl = isUFC 
                ? `/event/${fight.event_name.toLowerCase().replace(/ /g, '-').replace(/:/g, '').replace(/,/g, '')}-${fight.date}`
                : `/boxing-event/${fight.venue.toLowerCase().replace(/ /g, '-').replace(/,/g, '').replace(/\./g, '').replace(/'/g, '')}-${fight.date}`;
            
            return `
                <a href="${eventUrl}" class="block bg-dark-card rounded-xl p-6 border border-dark-border hover:border-${accentColor}/50 transition-all">
                    <div class="flex items-center justify-center gap-6 mb-6">
                        <div class="text-center w-32">
                            <div class="w-20 h-20 rounded-full bg-dark-elevated mb-3 mx-auto overflow-hidden">
                                <img src="${fight.fighter1_image || placeholder}" alt="${fight.fighter1}" class="w-full h-full object-cover ${fight.fighter1_image ? '' : 'opacity-40'}">
                            </div>
                            <p class="font-staatliches text-lg leading-tight uppercase line-clamp-2">${fight.fighter1.split(' ').pop()}</p>
                        </div>
                        <div class="font-work font-semibold text-base italic uppercase text-text-secondary">VS</div>
                        <div class="text-center w-32">
                            <div class="w-20 h-20 rounded-full bg-dark-elevated mb-3 mx-auto overflow-hidden">
                                <img src="${fight.fighter2_image || placeholder}" alt="${fight.fighter2}" class="w-full h-full object-cover ${fight.fighter2_image ? '' : 'opacity-40'}">
                            </div>
                            <p class="font-staatliches text-lg leading-tight uppercase line-clamp-2">${fight.fighter2.split(' ').pop()}</p>
                        </div>
                    </div>
                    <div class="border-t border-dark-border pt-4">
                        <p class="text-${accentColor} font-work font-semibold mb-2 text-sm">
                            ${fight.date} • ${fight.time || 'TBA'}
                        </p>
                        <div class="flex items-center justify-between">
                            <span class="font-work text-xs text-text-tertiary truncate">${fight.venue}</span>
                            <span class="flex items-center gap-1.5 flex-shrink-0">
                                <span class="w-2 h-2 rounded-full bg-${accentColor}"></span>
                                <span class="font-work text-xs uppercase text-text-secondary">${fight.sport}</span>
                            </span>
                        </div>
                    </div>
                </a>
            `;
        }
    </script>
</head>
<body class="bg-dark-bg text-text-primary">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        
        <!-- Header -->
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8">
            <div class="bg-accent-red px-4 py-2 font-staatliches text-2xl inline-block self-start">
                FIGHT SCHEDULE
            </div>
            
            <!-- Search Bar -->
            <div class="flex-1 max-w-md sm:ml-4">
                <div class="relative">
                    <input 
                        type="text" 
                        id="searchInput"
                        placeholder="Search fighter or event"
                        class="w-full bg-dark-elevated border border-dark-border rounded-lg px-4 py-2 pl-10 text-text-primary placeholder-text-tertiary font-work text-sm focus:outline-none focus:border-accent-red"
                    >
                    <svg class="absolute left-3 top-2.5 w-5 h-5 text-text-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>
        </div>

        <!-- FEATURED FIGHTS -->
        {% if featured_fights %}
        <div class="mb-12">
            <h2 class="font-staatliches text-3xl uppercase mb-6">Featured Fights</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                {% for fight in featured_fights %}
                <a href="{% if fight.sport == 'UFC' %}/event/{{ fight.event_name|lower|replace(' ', '-')|replace(':', '')|replace(',', '') }}-{{ fight.date }}{% else %}/boxing-event/{{ fight.venue|lower|replace(' ', '-')|replace(',', '')|replace('.', '')|replace("'", '') }}-{{ fight.date }}{% endif %}" 
                   class="block bg-dark-card rounded-xl overflow-hidden border border-dark-border hover:border-{% if fight.sport == 'UFC' %}accent-red{% else %}accent-orange{% endif %} transition-colors">
                    <div class="relative h-80">
                        <div class="absolute inset-0 flex">
                            <div class="w-1/2 bg-gradient-to-r from-dark-elevated to-transparent">
                                <img src="{{ fight.fighter1_image or ('/static/placeholder-fighter-mma.png' if fight.sport == 'UFC' else '/static/placeholder-fighter-boxing.png') }}" 
                                     alt="{{ fight.fighter1 }}" 
                                     class="w-full h-full object-cover opacity-60">
                            </div>
                            <div class="w-1/2 bg-gradient-to-l from-dark-elevated to-transparent">
                                <img src="{{ fight.fighter2_image or ('/static/placeholder-fighter-mma.png' if fight.sport == 'UFC' else '/static/placeholder-fighter-boxing.png') }}" 
                                     alt="{{ fight.fighter2 }}" 
                                     class="w-full h-full object-cover opacity-60">
                            </div>
                        </div>
                        
                        <div class="absolute inset-0 bg-gradient-to-t from-dark-card via-dark-card/50 to-transparent">
                            <div class="absolute bottom-0 left-0 right-0 p-6">
                                <div class="inline-block bg-{% if fight.sport == 'UFC' %}accent-red{% else %}accent-orange{% endif %} px-3 py-1 rounded-full mb-3">
                                    <span class="font-work text-xs font-semibold uppercase {% if fight.sport != 'UFC' %}text-dark-bg{% endif %}">
                                        {% if fight.sport == 'UFC' %}
                                            {{ fight.event_name or 'UFC Fight Night' }}
                                        {% else %}
                                            {{ fight.weight_class or 'Boxing Match' }}
                                        {% endif %}
                                    </span>
                                </div>
                                
                                <div class="flex items-end justify-between mb-4">
                                    <div>
                                        <h3 class="font-staatliches text-3xl md:text-4xl uppercase">{{ fight.fighter1.split()[-1] }}</h3>
                                        <p class="font-work text-sm text-text-secondary">{{ fight.fighter1 }}</p>
                                    </div>
                                    <div class="font-work text-2xl font-bold text-text-secondary mx-4 mb-2">VS</div>
                                    <div class="text-right">
                                        <h3 class="font-staatliches text-3xl md:text-4xl uppercase">{{ fight.fighter2.split()[-1] }}</h3>
                                        <p class="font-work text-sm text-text-secondary">{{ fight.fighter2 }}</p>
                                    </div>
                                </div>
                                
                                <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm font-work">
                                    <div class="flex items-center gap-1.5">
                                        <svg class="w-4 h-4 text-{% if fight.sport == 'UFC' %}accent-red{% else %}accent-orange{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                        </svg>
                                        <span class="text-{% if fight.sport == 'UFC' %}accent-red{% else %}accent-orange{% endif %} font-semibold">{{ fight.date }} • {{ fight.time or 'TBA' }}</span>
                                    </div>
                                    <div class="flex items-center gap-1.5">
                                        <svg class="w-4 h-4 text-text-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                        </svg>
                                        <span class="text-text-secondary">{{ fight.venue }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- UFC SECTION -->
        {% if ufc_fights %}
        <div class="mb-12">
            <h2 class="font-staatliches text-3xl uppercase mb-6">UFC</h2>
            <div class="scroll-wrapper">
                <button onclick="scrollContainer('left', 'ufc-scroll')" class="scroll-btn scroll-btn-left" aria-label="Scroll left">
                    <svg class="w-5 h-5 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <button onclick="scrollContainer('right', 'ufc-scroll')" class="scroll-btn scroll-btn-right" aria-label="Scroll right">
                    <svg class="w-5 h-5 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
                <div id="ufc-scroll" class="scroll-container pb-4">
                {% for fight in ufc_fights %}
                <a href="/event/{{ fight.event_name|lower|replace(' ', '-')|replace(':', '')|replace(',', '') }}-{{ fight.date }}" 
                   class="scroll-item w-80 block bg-dark-card rounded-xl p-6 border border-dark-border hover:border-accent-red/50 transition-all">
                    <div class="flex items-center justify-center gap-6 mb-6">
                        <div class="text-center w-32">
                            <div class="w-20 h-20 rounded-full bg-dark-elevated mb-3 mx-auto overflow-hidden">
                                <img src="{{ fight.fighter1_image or '/static/placeholder-fighter-mma.png' }}" 
                                     alt="{{ fight.fighter1 }}" 
                                     class="w-full h-full object-cover {% if not fight.fighter1_image %}opacity-40{% endif %}">
                            </div>
                            <p class="font-staatliches text-lg leading-tight uppercase line-clamp-2">{{ fight.fighter1.split()[-1] }}</p>
                        </div>
                        <div class="font-work font-semibold text-base italic uppercase text-text-secondary">VS</div>
                        <div class="text-center w-32">
                            <div class="w-20 h-20 rounded-full bg-dark-elevated mb-3 mx-auto overflow-hidden">
                                <img src="{{ fight.fighter2_image or '/static/placeholder-fighter-mma.png' }}" 
                                     alt="{{ fight.fighter2 }}" 
                                     class="w-full h-full object-cover {% if not fight.fighter2_image %}opacity-40{% endif %}">
                            </div>
                            <p class="font-staatliches text-lg leading-tight uppercase line-clamp-2">{{ fight.fighter2.split()[-1] }}</p>
                        </div>
                    </div>
                    <div class="border-t border-dark-border pt-4">
                        <p class="text-accent-red font-work font-semibold mb-2 text-sm">
                            {{ fight.date }}{% if fight.card_type %} • {{ fight.card_type }}: {{ fight.time or 'TBA' }}{% else %} • {{ fight.time or 'TBA' }}{% endif %}
                        </p>
                        <div class="flex items-center justify-between">
                            <span class="font-work text-xs text-text-tertiary truncate">{{ fight.venue }}</span>
                            <span class="flex items-center gap-1.5 flex-shrink-0">
                                <span class="w-2 h-2 rounded-full bg-accent-red"></span>
                                <span class="font-work text-xs uppercase text-text-secondary">UFC</span>
                            </span>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
            </div>
        </div>
        {% endif %}

        <!-- BOXING SECTION -->
        {% if boxing_fights %}
        <div class="mb-12">
            <h2 class="font-staatliches text-3xl uppercase mb-6">Boxing</h2>
            <div class="scroll-wrapper">
                <button onclick="scrollContainer('left', 'boxing-scroll')" class="scroll-btn scroll-btn-left" aria-label="Scroll left">
                    <svg class="w-5 h-5 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <button onclick="scrollContainer('right', 'boxing-scroll')" class="scroll-btn scroll-btn-right" aria-label="Scroll right">
                    <svg class="w-5 h-5 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
                <div id="boxing-scroll" class="scroll-container pb-4">
                {% for fight in boxing_fights %}
                <a href="/boxing-event/{{ fight.venue|lower|replace(' ', '-')|replace(',', '')|replace('.', '')|replace("'", '') }}-{{ fight.date }}" 
                   class="scroll-item w-80 block bg-dark-card rounded-xl p-6 border border-dark-border hover:border-accent-orange/50 transition-all">
                    <div class="flex items-center justify-center gap-6 mb-6">
                        <div class="text-center w-32">
                            <div class="w-20 h-20 rounded-full bg-dark-elevated mb-3 mx-auto overflow-hidden">
                                <img src="{{ fight.fighter1_image or '/static/placeholder-fighter-boxing.png' }}" 
                                     alt="{{ fight.fighter1 }}" 
                                     class="w-full h-full object-cover {% if not fight.fighter1_image %}opacity-40{% endif %}">
                            </div>
                            <p class="font-staatliches text-lg leading-tight uppercase line-clamp-2">{{ fight.fighter1.split()[-1] }}</p>
                        </div>
                        <div class="font-work font-semibold text-base italic uppercase text-text-secondary">VS</div>
                        <div class="text-center w-32">
                            <div class="w-20 h-20 rounded-full bg-dark-elevated mb-3 mx-auto overflow-hidden">
                                <img src="{{ fight.fighter2_image or '/static/placeholder-fighter-boxing.png' }}" 
                                     alt="{{ fight.fighter2 }}" 
                                     class="w-full h-full object-cover {% if not fight.fighter2_image %}opacity-40{% endif %}">
                            </div>
                            <p class="font-staatliches text-lg leading-tight uppercase line-clamp-2">{{ fight.fighter2.split()[-1] }}</p>
                        </div>
                    </div>
                    <div class="border-t border-dark-border pt-4">
                        <p class="text-accent-orange font-work font-semibold mb-2 text-sm">
                            {{ fight.date }} • {{ fight.time or 'TBA' }}
                        </p>
                        <div class="flex items-center justify-between">
                            <span class="font-work text-xs text-text-tertiary truncate">{{ fight.venue }}</span>
                            <span class="flex items-center gap-1.5 flex-shrink-0">
                                <span class="w-2 h-2 rounded-full bg-accent-orange"></span>
                                <span class="font-work text-xs uppercase text-text-secondary">BOXING</span>
                            </span>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
            </div>
        </div>
        {% endif %}

        <!-- COMING UP SOON -->
        {% if coming_soon %}
        <div class="mb-12">
            <h2 class="font-staatliches text-3xl uppercase mb-6">Coming Up Soon</h2>
            <div class="bg-dark-card rounded-xl border border-dark-border overflow-hidden">
                {% for fight in coming_soon %}
                <a href="{% if fight.sport == 'UFC' %}/event/{{ fight.event_name|lower|replace(' ', '-')|replace(':', '')|replace(',', '') }}-{{ fight.date }}{% else %}/boxing-event/{{ fight.venue|lower|replace(' ', '-')|replace(',', '')|replace('.', '')|replace("'", '') }}-{{ fight.date }}{% endif %}" 
                   class="block p-4 {% if not loop.last %}border-b border-dark-border{% endif %} hover:bg-dark-elevated/50 transition-colors">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2">
                        <div class="flex items-center gap-3">
                            <span class="font-work font-semibold text-text-primary">
                                {{ fight.fighter1 }} vs {{ fight.fighter2 }}
                            </span>
                            <div class="flex items-center gap-1.5">
                                <span class="w-2 h-2 rounded-full bg-{% if fight.sport == 'UFC' %}accent-red{% else %}accent-orange{% endif %}"></span>
                                <span class="font-work text-xs uppercase text-text-secondary">{{ fight.sport }}</span>
                            </div>
                        </div>
                        <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm">
                            <span class="font-work text-{% if fight.sport == 'UFC' %}accent-red{% else %}accent-orange{% endif %} font-semibold flex-shrink-0 order-1">
                                {{ fight.date }} • {{ fight.time or 'TBA' }}
                            </span>
                            <span class="font-work text-text-tertiary truncate order-2">
                                {{ fight.venue }}
                            </span>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

    </div>
</body>
</html>
