<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fighter Management - Admin</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0a0a;
            color: #f5f5f5;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { margin-bottom: 10px; font-size: 2rem; }
        .subtitle { color: #a8a8a8; margin-bottom: 30px; }
        .nav-links {
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
        }
        .nav-links a {
            color: #fb923c;
            text-decoration: none;
        }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        
        .section {
            background: #141414;
            border: 1px solid #252525;
            border-radius: 8px;
            padding: 25px;
        }
        .section h2 { margin-bottom: 20px; font-size: 1.5rem; }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .search-box input {
            flex: 1;
            background: #1a1a1a;
            color: #f5f5f5;
            border: 1px solid #252525;
            padding: 10px 15px;
            border-radius: 4px;
        }
        
        .fighter-list {
            max-height: 500px;
            overflow-y: auto;
            background: #1a1a1a;
            border: 1px solid #252525;
            border-radius: 4px;
        }
        .fighter-item {
            padding: 15px;
            border-bottom: 1px solid #252525;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .fighter-item:last-child { border-bottom: none; }
        .fighter-item:hover { background: #1f1f1f; }
        
        .fighter-info { flex: 1; }
        .fighter-name { font-weight: 600; margin-bottom: 4px; }
        .fighter-meta { font-size: 0.85rem; color: #a8a8a8; }
        
        .actions {
            display: flex;
            gap: 8px;
        }
        button {
            background: #fb923c;
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.9rem;
        }
        button:hover { opacity: 0.9; }
        button.danger { background: #dc2626; color: #fff; }
        button.secondary { background: #252525; color: #f5f5f5; }
        
        .add-form {
            display: grid;
            gap: 15px;
            background: #1a1a1a;
            padding: 20px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .add-form input, .add-form select {
            background: #0a0a0a;
            color: #f5f5f5;
            border: 1px solid #252525;
            padding: 10px 15px;
            border-radius: 4px;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }
        .badge-star { background: #fbbf24; color: #000; }
        .success { color: #22c55e; margin-top: 10px; }
        .error { color: #dc2626; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-links">
            <a href="/">← Home</a>
            <a href="/admin/upload-images">Upload Images</a>
            <a href="/admin/clear-cache">Clear Cache</a>
        </div>
        
        <h1>Fighter Management</h1>
        <p class="subtitle">Edit fighter names and manage big name fighters</p>
        
        <div class="grid">
            <!-- Edit Fighter Names -->
            <div class="section">
                <h2>Edit Fighter Names</h2>
                
                <div class="search-box">
                    <input type="text" id="search-edit" placeholder="Search fighters..." onkeyup="filterList('edit')">
                </div>
                
                <div class="fighter-list" id="edit-list">
                    {% for fighter in all_fighters %}
                    <div class="fighter-item" data-name="{{ fighter.name.lower() }}">
                        <div class="fighter-info">
                            <div class="fighter-name">
                                {{ fighter.name }}
                                {% if fighter.name in big_names %}<span class="badge badge-star">★ BIG NAME</span>{% endif %}
                            </div>
                            <div class="fighter-meta">{{ fighter.sport }}</div>
                        </div>
                        <div class="actions">
                            <button onclick="editFighter('{{ fighter.name }}', '{{ fighter.sport }}')">Rename</button>
                            <button class="danger" onclick="deleteFighter('{{ fighter.name }}', '{{ fighter.sport }}')">Delete</button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Big Name Fighters -->
            <div class="section">
                <h2>Big Name Fighters ⭐</h2>
                
                <div class="add-form">
                    <form method="POST" action="/admin/manage-fighters">
                        <input type="hidden" name="action" value="add_big_name">
                        <input type="text" name="fighter_name" placeholder="Fighter name" required>
                        <button type="submit">Add Big Name</button>
                    </form>
                </div>
                
                <div class="search-box">
                    <input type="text" id="search-big" placeholder="Search big names..." onkeyup="filterList('big')">
                </div>
                
                <div class="fighter-list" id="big-list">
                    {% for fighter in big_names %}
                    <div class="fighter-item" data-name="{{ fighter|lower }}">
                        <div class="fighter-info">
                            <div class="fighter-name">{{ fighter }}</div>
                        </div>
                        <div class="actions">
                            <form method="POST" action="/admin/manage-fighters" style="display: inline;">
                                <input type="hidden" name="action" value="remove_big_name">
                                <input type="hidden" name="fighter_name" value="{{ fighter }}">
                                <button type="submit" class="danger">Remove</button>
                            </form>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function filterList(type) {
            const input = document.getElementById('search-' + type);
            const filter = input.value.toLowerCase();
            const list = document.getElementById(type + '-list');
            const items = list.getElementsByClassName('fighter-item');
            
            for (let item of items) {
                const name = item.getAttribute('data-name');
                item.style.display = name.includes(filter) ? '' : 'none';
            }
        }
        
        function editFighter(oldName, sport) {
            const newName = prompt('Rename fighter:', oldName);
            if (newName && newName !== oldName) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/admin/manage-fighters';
                form.innerHTML = `
                    <input type="hidden" name="action" value="rename">
                    <input type="hidden" name="old_name" value="${oldName}">
                    <input type="hidden" name="new_name" value="${newName}">
                    <input type="hidden" name="sport" value="${sport}">
                `;
                document.body.appendChild(form);
                form.submit();
            }
        }
        
        function deleteFighter(name, sport) {
            if (confirm(`Delete ${name}? This will remove their image entry.`)) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/admin/manage-fighters';
                form.innerHTML = `
                    <input type="hidden" name="action" value="delete">
                    <input type="hidden" name="fighter_name" value="${name}">
                    <input type="hidden" name="sport" value="${sport}">
                `;
                document.body.appendChild(form);
                form.submit();
            }
        }
    </script>
</body>
</html>
