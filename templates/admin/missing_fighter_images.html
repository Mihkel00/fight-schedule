{% extends 'admin/master.html' %}

{% block body %}
<h1>Fighter Images Management</h1>
<p class="text-muted">All fighters in current schedule. Updates when cache refreshes.</p>

<form method="POST" class="mt-4">
    <!-- Missing Images Section -->
    {% if missing_fighters %}
    <div class="card mb-4">
        <div class="card-header bg-danger text-white">
            <h3 class="mb-0">‚ö†Ô∏è Missing Images ({{ missing_fighters|length }})</h3>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Fighter</th>
                        <th>Sport</th>
                        <th>Appears</th>
                        <th style="width: 400px;">Image URL</th>
                    </tr>
                </thead>
                <tbody>
                    {% for fighter, info in missing_fighters.items() %}
                    <tr>
                        <td><strong>{{ fighter }}</strong><br><small class="text-muted">{{ info.example }}</small></td>
                        <td><span class="badge badge-{{ 'danger' if info.sport == 'UFC' else 'warning' }}">{{ info.sport }}</span></td>
                        <td>{{ info.count }}√ó</td>
                        <td>
                            <input type="text" name="image_{{ fighter.replace(' ', '_') }}" class="form-control form-control-sm" placeholder="https://...">
                            <input type="hidden" name="sport_{{ fighter.replace(' ', '_') }}" value="{{ info.sport }}">
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <div class="alert alert-success">‚úì All fighters have images!</div>
    {% endif %}

    <!-- Existing Images Section -->
    {% if existing_fighters %}
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h3 class="mb-0">‚úì Has Images ({{ existing_fighters|length }})</h3>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Fighter</th>
                        <th>Sport</th>
                        <th>Appears</th>
                        <th style="width: 400px;">Current Image URL</th>
                    </tr>
                </thead>
                <tbody>
                    {% for fighter, info in existing_fighters.items() %}
                    <tr>
                        <td><strong>{{ fighter }}</strong><br><small class="text-muted">{{ info.example }}</small></td>
                        <td><span class="badge badge-{{ 'danger' if info.sport == 'UFC' else 'warning' }}">{{ info.sport }}</span></td>
                        <td>{{ info.count }}√ó</td>
                        <td>
                            <input type="text" name="image_{{ fighter.replace(' ', '_') }}" class="form-control form-control-sm" value="{{ info.image_url or '' }}" placeholder="https://...">
                            <input type="hidden" name="sport_{{ fighter.replace(' ', '_') }}" value="{{ info.sport }}">
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}

    <button type="submit" class="btn btn-primary btn-lg">üíæ Save All Changes</button>
</form>

<hr class="my-4">
<h4>Finding Images</h4>
<ol>
    <li>Google: "[Fighter Name] official photo" or "[Fighter Name] headshot"</li>
    <li>Right-click image ‚Üí Copy image address</li>
    <li>Paste URL above and click Save</li>
</ol>

<style>
    .badge-danger { background-color: #dc2626; }
    .badge-warning { background-color: #f59e0b; color: #000; }
    .card-header h3 { font-size: 1.25rem; }
</style>
{% endblock %}
